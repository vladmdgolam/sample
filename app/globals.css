@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Muji-inspired Natural Palette */
  --c-chassis-main: #E8E3DB;
  --c-chassis-dark: #D9D3C8;
  --c-armrest: #5C5249;

  --c-pad-rubber: #C4B8A8;
  --c-btn-light: #F2EDE6;
  --c-btn-slate: #9A8F82;
  --c-btn-red: #C9847A;

  --c-lcd-bg: #D4C9B8;
  --c-lcd-bezel: #8B8073;
  --c-lcd-text: #4A4239;
  --c-lcd-text-dim: #7A7068;

  --c-text-dark: #4A4239;
  --c-accent-warm: #C9847A;

  /* Playing state colors */
  --c-playing: #D4A574;
  --c-playing-bright: #E8C4A0;
  --c-playing-glow: rgba(212, 165, 116, 0.6);

  /* Radii */
  --r-pad: 6px;
  --r-btn: 4px;

  /* Shadows */
  --shadow-btn: 1px 1px 3px rgba(74,66,57,0.12), -1px -1px 2px rgba(255,255,255,0.7);
  --shadow-pad-inset: inset 0px 2px 4px rgba(74,66,57,0.18), inset 0px -1px 2px rgba(255,255,255,0.4);

  /* Legacy mappings */
  --page-bg: #F5F1EB;
  --container-bg: var(--c-chassis-main);
  --bg: var(--c-pad-rubber);
  --lcd-bg: var(--c-lcd-bg);
  --lcd-text: var(--c-lcd-text);
  --lcd-text-dim: var(--c-lcd-text-dim);
  --out-size: 8px;
}

.dark {
  --c-chassis-main: #2D2A26;
  --c-chassis-dark: #1F1D1A;
  --c-pad-rubber: #4A453D;
  --c-lcd-bg: #3D3830;
  --c-lcd-text: #D4C9B8;
  --c-lcd-text-dim: #8B8073;

  --c-playing: #C9947A;
  --c-playing-bright: #DEB896;
  --c-playing-glow: rgba(201, 148, 122, 0.5);

  --page-bg: #1F1D1A;
  --container-bg: var(--c-chassis-main);
  --bg: var(--c-pad-rubber);
  --lcd-bg: var(--c-lcd-bg);
  --lcd-text: var(--c-lcd-text);
  --lcd-text-dim: var(--c-lcd-text-dim);
  --shadow-size: 0px;
  --out-size: 6px;
}


html,
#next {
  height: 100%;
}

body {
  height: 100%;
  overflow: hidden;
  background-color: var(--page-bg);
}

.dark body {
  background-color: transparent;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

.grain-texture {
  background: url(/grain.png) repeat;
  background-size: 16px;
  opacity: .06
}

.te-inner-button {
  box-shadow: 0 4px 6px 0 rgba(0, 0, 0, .1), 0 0 1px 0 hsla(0, 0%, 88%, .5), 4px 4px 5px 0 hsla(13, 4%, 50%, .1), 1px 6px 8px 0 hsla(15, 3%, 49%, .1), -4px -4px 4px 0 var(--white), 4px -4px 4px 0 var(--white)
}

.pad {
  background: var(--c-pad-rubber);
  border-radius: var(--r-pad);
  border: 1px solid rgba(0,0,0,0.15);
  box-shadow: var(--shadow-pad-inset), var(--shadow-btn);
  transition: all 0.1s ease;
}

.dark .pad {
  border: 1px solid rgba(0,0,0,0.3);
  box-shadow: var(--shadow-pad-inset), 1px 1px 3px rgba(0,0,0,0.4);
}

.pad-hovered {
  filter: brightness(1.08);
  transform: scale(0.98);
  box-shadow: var(--shadow-pad-inset);
}

.pad-playing {
  background: linear-gradient(135deg, var(--c-playing) 0%, var(--c-playing-bright) 100%);
  animation: mpcGlow 0.35s ease-in-out infinite alternate;
  border-color: #A67C5B;
  transform: scale(1.02);
  filter: brightness(1.1);
}

.pad-circle {
  transition: all 0.2s;
  --light-angle: 215deg;
  background: var(--bg);
  --shadow-size: min(4px, 0.4vw);
  --shadow-blur: min(4px, 0.4vw);
  box-shadow:
    inset calc(var(--shadow-size) * cos(var(--light-angle))) calc(var(--shadow-size) * sin(var(--light-angle))) var(--shadow-blur) rgba(144, 144, 144, 0.2),
    inset calc(var(--shadow-size) * cos(var(--light-angle) + 180deg)) calc(var(--shadow-size) * sin(var(--light-angle) + 180deg)) var(--shadow-blur) rgba(255, 255, 255, 0.2);
}

.dark .pad-circle {
  --shadow-size: min(3px, 0.4vw);
  --shadow-blur: min(2px, 0.4vw);
  box-shadow:
    inset calc(var(--shadow-size) * cos(var(--light-angle))) calc(var(--shadow-size) * sin(var(--light-angle))) var(--shadow-blur) rgb(0 0 0 / 40%),
    inset calc(var(--shadow-size) * cos(var(--light-angle) + 180deg)) calc(var(--shadow-size) * sin(var(--light-angle) + 180deg)) var(--shadow-blur) rgba(255, 255, 255, 0.2);
}

.pad-circle-static {
  transition: all 0.2s;
  --light-angle: 215deg;
  background: var(--bg);
  --shadow-size: min(4px, 0.4vw);
  --shadow-blur: min(4px, 0.4vw);
  box-shadow:
    inset calc(var(--shadow-size) * cos(var(--light-angle))) calc(var(--shadow-size) * sin(var(--light-angle))) var(--shadow-blur) rgba(144, 144, 144, 0.2),
    inset calc(var(--shadow-size) * cos(var(--light-angle) + 180deg)) calc(var(--shadow-size) * sin(var(--light-angle) + 180deg)) var(--shadow-blur) rgba(255, 255, 255, 0.2);
}

.dark .pad-circle-static {
  --light-angle: calc(215deg + 180deg);
  --shadow-size: min(3px, 0.4vw);
  --shadow-blur: min(2px, 0.4vw);
  box-shadow:
    inset calc(var(--shadow-size) * cos(var(--light-angle))) calc(var(--shadow-size) * sin(var(--light-angle))) var(--shadow-blur) rgb(0 0 0 / 40%),
    inset calc(var(--shadow-size) * cos(var(--light-angle) + 180deg)) calc(var(--shadow-size) * sin(var(--light-angle) + 180deg)) var(--shadow-blur) rgba(255, 255, 255, 0.2);
}

.pad-circle:hover,
.pad-circle.active {
  --light-angle: 35deg;
  scale: 0.95;
}

@keyframes mpcGlow {
  0% {
    box-shadow:
      inset 0 0 15px var(--c-playing-glow),
      0 0 var(--out-size) var(--c-playing-glow),
      0 0 calc(var(--out-size) * 2) var(--c-playing-glow);
  }
  100% {
    box-shadow:
      inset 0 0 25px var(--c-playing-glow),
      0 0 calc(var(--out-size) * 1.5) var(--c-playing-glow),
      0 0 calc(var(--out-size) * 3) var(--c-playing-glow);
  }
}


/* Edit mode - retro green LCD */
.edit-mode {
  --lcd-bg: #003D2E;
  --lcd-text: #7FFFB2;
  --lcd-text-dim: #3D8C6A;
  --c-lcd-bezel: #1A5C47;
  --c-lcd-bg: #003D2E;
}

.pads_grid {
  grid-template-rows: repeat(4, minmax(0, 1fr));
  gap: 0.6vw;
  /* Ensure consistent gap in both directions */
}



/* Shadcn UI variables - Muji-themed */
@layer base {
  :root {
    --background: 36 23% 95%;
    --foreground: 30 10% 25%;
    --card: 36 18% 90%;
    --card-foreground: 30 10% 25%;
    --popover: 36 23% 95%;
    --popover-foreground: 30 10% 25%;
    --primary: 30 10% 25%;
    --primary-foreground: 36 23% 95%;
    --secondary: 36 12% 85%;
    --secondary-foreground: 30 10% 25%;
    --muted: 36 12% 85%;
    --muted-foreground: 30 8% 45%;
    --accent: 28 45% 65%;
    --accent-foreground: 30 10% 25%;
    --destructive: 6 55% 55%;
    --destructive-foreground: 36 23% 95%;
    --border: 30 10% 75%;
    --input: 30 10% 75%;
    --ring: 28 45% 65%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 30 12% 12%;
    --foreground: 36 18% 85%;
    --muted: 30 8% 25%;
    --muted-foreground: 30 8% 55%;
    --border: 30 8% 25%;
  }
}

